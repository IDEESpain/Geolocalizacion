<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Proyecto de geocodificación de direcciones. Comisión Especializada de Normas Geográficas. España">
    <meta name="author" content="Gonzalo López García">
    <link rel="canonical" href="https://example.com/api/autocompletar/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Autocompletar - Geocodificador SCN</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">Geocodificador SCN</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Datos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../datos/modelo_de_datos/">Modelo de datos</a>
</li>

                        
                            
<li >
    <a href="../../datos/fuentes_de_datos/">Fuentes de datos</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../informacion_general/">Información general</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Métodos</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../geocodificacion_directa/">Geocodificación directa</a>
</li>

        
            
<li >
    <a href="../geocodificacion_inversa/">Geocodificación inversa</a>
</li>

        
            
<li class="active">
    <a href="./">Autocompletar</a>
</li>

        
            
<li >
    <a href="../geocodificacion_estructurada/">Geocodificación estructurada</a>
</li>

        
            
<li >
    <a href="../no_disponible/">Lugar</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../no_disponible/">Formato de la respuesta</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Referencias <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../referencias/abreviaturas/">Abreviaturas</a>
</li>

                        
                            
<li >
    <a href="../../referencias/ciudades_autonomas/">Ciudades autónomas</a>
</li>

                        
                            
<li >
    <a href="../../referencias/comunidades_autonomas/">Comunidades autónomas</a>
</li>

                        
                            
<li >
    <a href="../../referencias/estados_del_dato/">Estados del dato</a>
</li>

                        
                            
<li >
    <a href="../../referencias/lenguas/">Lenguas</a>
</li>

                        
                            
<li >
    <a href="../../referencias/municipios/">Municipios</a>
</li>

                        
                            
<li >
    <a href="../../referencias/poblaciones/">Poblaciones</a>
</li>

                        
                            
<li >
    <a href="../../referencias/proveedores_de_datos/">Proveedores de datos</a>
</li>

                        
                            
<li >
    <a href="../../referencias/provincias/">Provincias</a>
</li>

                        
                            
<li >
    <a href="../../referencias/tipos_de_dato/">Tipos de dato</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../ejemplos/no_disponible/">Ejemplos</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../geocodificacion_inversa/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../geocodificacion_estructurada/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/cenormasgeograficas/geocodificador/edit/master/docs/api/autocompletar.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#autocompletar">AUTOCOMPLETAR</a></li>
            <li class="second-level"><a href="#cuadro-de-parametros">Cuadro de parámetros</a></li>
                
            <li class="second-level"><a href="#implementacion">Implementación</a></li>
                
                <li class="third-level"><a href="#limitacion-de-las-solicitudes">Limitación de las solicitudes</a></li>
                <li class="third-level"><a href="#respuestas-asincronas">Respuestas asíncronas</a></li>
                <li class="third-level"><a href="#uso-de-la-geocodificacion-directa">Uso de la geocodificación directa</a></li>
                <li class="third-level"><a href="#uso-de-librerias-predisenadas">Uso de librerías prediseñadas</a></li>
            <li class="second-level"><a href="#configurar-el-numero-de-resultados">Configurar el número de resultados</a></li>
                
            <li class="second-level"><a href="#enfoque-local">Enfoque local</a></li>
                
            <li class="second-level"><a href="#filtros">Filtros</a></li>
                
                <li class="third-level"><a href="#filtrado-por-origen-de-los-datos">Filtrado por origen de los datos</a></li>
                <li class="third-level"><a href="#filtrado-por-tipo-de-datos">Filtrado por tipo de datos</a></li>
                <li class="third-level"><a href="#filtrado-por-area-rectangular">Filtrado por área rectangular</a></li>
                <li class="third-level"><a href="#filtrado-por-area-circular">Filtrado por área circular</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="autocompletar">AUTOCOMPLETAR</h2>
<p><em>(EN EDICIÓN)</em>
<br /></p>
<p>Las aplicaciones de localización de direcciones suelen incorporar una funcionalidad de búsqueda al vuelo de <em>direcciones</em>, <em>calles</em>, <em>topónimos</em> y <em>puntos de interés</em>, a partir del texto que el usuario va introduciendo, anticipando un conjunto de posibles resultados con objeto de seleccionar uno de ellos.</p>
<p>Mediante este método no es necesario lanzar una petición de <em>geocodificicación directa</em> especificando completamente todos los términos de la búsqueda.</p>
<p>El autocompletado requiere interrogar sucesivamente a la url (endpoint) de este método (/v1/autocomplete), pasándole el texto que el usuario va escribiendo a medida que lo teclea. Las peticiones pueden ir acompañadas de un <em>focus.point</em> con objeto de priorizar los resultados cercanos a un punto dado.</p>
<p>En el caso de la <em>API de geocodificación del SCN</em> la url que responde al método <em>autocompletar</em> es:<br />
<strong>https://geocoder-5-ign.larioja.org/v1/autocomplete</strong></p>
<p><br />
<img alt="Ejemplo *autocompletar* (fuente: propia)" src="../../img/autocompletar_ejemplo.jpg" title="ejemplo *autocompletar* (fuente: propia)" />
<br /></p>
<p><br /></p>
<h3 id="cuadro-de-parametros">Cuadro de parámetros</h3>
<p><br /></p>
<p>La relación de parámetros que se pueden utilizar en las operaciones de <em>autocompletar</em> es la siguiente:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>boundary.circle.lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la latitud del punto central del círculo utilizado en la búsqueda en una región circular <sup>(1)</sup></td>
<td>42.268</td>
</tr>
<tr>
<td><strong><code>boundary.circle.lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la longitud del punto central del círculo utilizado en la búsqueda en una región circular <sup>(1)</sup></td>
<td>-4.405</td>
</tr>
<tr>
<td><strong><code>boundary.circle.radius</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>50</td>
<td>Valor del radio (kilómetros) utilizado en la búsqueda en una región circular <sup>(1)</sup></td>
<td>10</td>
</tr>
<tr>
<td><strong><code>boundary.country</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>ninguno</td>
<td><p class="text-warning">NO IMPLEMENTADO</p></td>
<td></td>
</tr>
<tr>
<td><strong><code>boundary.gid</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>ninguno</td>
<td><p class="text-warning">NO IMPLEMENTADO</p></td>
<td></td>
</tr>
<tr>
<td><strong><code>boundary.rect.max_lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor máximo de la latitud utilizado en la búsqueda en una región rectangular <sup>(1)</sup></td>
<td>41.7342</td>
</tr>
<tr>
<td><strong><code>boundary.rect.max_lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor máximo de la longitud utilizado en la búsqueda en una región rectangular <sup>(1)</sup></td>
<td>-0.6585</td>
</tr>
<tr>
<td><strong><code>boundary.rect.min_lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor mínimo de la latitud utilizado en la búsqueda en una región rectangular <sup>(1)</sup></td>
<td>41.5453</td>
</tr>
<tr>
<td><strong><code>boundary.rect.min_lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor mínimo de la longitud utilizado en la búsqueda en una región rectangular <sup>(1)</sup></td>
<td>-1.1474</td>
</tr>
<tr>
<td><strong><code>focus.point.lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la latitud utilizado en la búsqueda alrededor de un punto <sup>(1)</sup></td>
<td>42.268</td>
</tr>
<tr>
<td><strong><code>focus.point.lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la longitud utilizado en la búsqueda alrededor de un punto <sup>(1)</sup></td>
<td>-4.405</td>
</tr>
<tr>
<td><strong><code>layers</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>todas las capas</td>
<td>Nombres de las capas de datos a las que se dirije la consulta, separados por comas</td>
<td>venue, street</td>
</tr>
<tr>
<td><strong><code>size</code></strong></td>
<td>integer</td>
<td>no</td>
<td>10</td>
<td>Número deseado de resultados</td>
<td>5</td>
</tr>
<tr>
<td><strong><code>sources</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>todas las fuentes</td>
<td>Listado de fuentes de datos separados por comas, codificados según <a href="../../listas_controladas/proveedores_de_datos">lista controlada <em>Proveedores de datos</em></a></td>
<td>cnig,calrj</td>
</tr>
<tr>
<td><strong><code>text</code></strong></td>
<td>cadena de caracteres</td>
<td>sí</td>
<td>ninguno</td>
<td>Texto de la dirección a buscar</td>
<td>Calle Mayor 10</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><br /></p>
<h3 id="implementacion">Implementación</h3>
<p><br /></p>
<p>Para la implementeción de la función <em>autocompletar</em> es conveniente tener en cuenta las siguientes recomendaciones:</p>
<p><br /></p>
<h4 id="limitacion-de-las-solicitudes">Limitación de las solicitudes</h4>
<p><br /></p>
<p>Dado que las solicitudes de <em>autocompletar</em> generalmente responden directamente a la entrada de texto que realiza el usuario, es importante tener en cuenta la velocidad de escritura con objeto de no colapsar las peticiones, ya que algunos dispositivos y redes pueden no responden bien cuando se envían demasiadas solicitudes, demasiado rápido, por lo que es conveniente realizar antes algunas pruebas para acotar la cadencia y el número de las peticiones.</p>
<p>La experiencia recomienda realizar entre 5 y 10 solicitudes por segundo, ya que este rango es el que ofrece el mejor equilibrio entre el uso de recursos y la capacidad de respuesta de <em>autocompletar</em>. En este sentido es recomendable configurar un regulardor en el lado del cliente con objeto de evitar exceder esos límites. Es aconsejable enviar menos solicitudes, en sus propios términos, que confiar en la limitación de velocidad del servidor para decidir qué solicitudes recibirán una respuesta completa.</p>
<p><br /></p>
<h4 id="respuestas-asincronas">Respuestas asíncronas</h4>
<p><br /></p>
<p>También es necesario tener en cuenta que las respuestas del servicio pueden ser asíncronas y no atender al mismo orden en el que fueron realizadas.</p>
<p>Como las peticiones se realizan a medida que el usuario escribe, pueden generarse peticiones parciales para una cadena de texto, siendo asíncronas las respuestas recibidas.</p>
<p>Imagine que las pulsaciones de teclado de un usuario que introduce el texto de búsqueda «madrid» genera dos peticiones síncronas: la primera con el texto <em>«ma»</em> y la segunda con el texto <em>«madrid»</em>. En este caso es posible que el usuario reciba antes la respuesta a la petición «madrid» que a la petición «ma», ya que las solicitudes de <em>autocompletar</em> con más caracteres probablemente se resolverán más rápido, ya que el espacio de búsqueda de la consulta es más reducido.</p>
<p>Es necesario tener en cuenta que la recepción de respuestas asíncronas puede generar cierta confusión en los usuarios.</p>
<p><br /></p>
<h4 id="uso-de-la-geocodificacion-directa">Uso de la <em>geocodificación directa</em></h4>
<p><br /></p>
<p>Se recomientda utilizar la <em>geocodificación directa</em> incluso con <em>autocompletar</em></p>
<p>Si bien el método <em>autocompletar</em> está diseñado específicamente para su uso con entradas introducidas por el usuario, considere la posibilidad de utilizar la <em>geocodificación directa</em> en ciertas situaciones.</p>
<p>Una forma común de utilización es enviar una solicitud <em>autocompletar</em> al presionar una tecla <small>(limitando las peticiones como se comentó anteriormente)</small>, y enviar una solicitud de <em>geocodificación directa</em> cuando el usuario presiona la tecla <code>Intro</code> o un botón de envío sobre una de las soluciones ofrecidas por <em>autocompletar</em>.</p>
<p>Este enfoque permite utilizar la velocidad y el manejo de entrada parcial del método <em>autocompletar</em> cuando sea necesario, y la precisión y funcionalidad adicional de la <em>geocodificación directa</em> cuando sea posible.</p>
<p><br /></p>
<h4 id="uso-de-librerias-predisenadas">Uso de librerías prediseñadas</h4>
<p><br /></p>
<p>Si tiene posibilidad, utilice una librería cliente que incorpore internamente las pautas de uso del método <em>autocompletar</em>.</p>
<p>Si utiliza Leaflet, puede valorar el uso del plugin <a href="https://github.com/nextzen"><em>Nextzen</em></a> <small>(anteriormente Mapzen)</small>. Este plugin ofrece todas las pautas de <em>autocompletar</em> descritas aquí.</p>
<p><br /></p>
<h3 id="configurar-el-numero-de-resultados">Configurar el número de resultados</h3>
<p><br /></p>
<p>Como en otros métodos, la API devuelve por defecto hasta 10 resultados. Si se quiere recibir un número distinto de resultados, es posible configurar el número deseado en la llamada, utilizando el parámetro <strong><code>size</code></strong>.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>size</code></strong></td>
<td>integer</td>
<td>no</td>
<td>10</td>
<td>Número deseado de resultados</td>
<td>5</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Ejemplo de configuración de <em>autocompletar</em> que ofrece una relación de 15 resultados posibles en respuesta al envío de la cadena de texto «antoni».</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=antoni&amp;size=15">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=antoni&amp;size=15</a></p>
<p><br />
<img alt="Respuesta 15 resultados *autocompletar* (fuente: propia)" src="../../img/autocompletar_antoni_15.jpg" title="Respuesta 15 resultados *autocompletar* (fuente: propia)" />
<br /></p>
<p><br /></p>
<h3 id="enfoque-local">Enfoque local</h3>
<p><br /></p>
<p>Para priorizar la búsqueda en un área geográfica específica, como el centro del mapa del usuario o la ubicación GPS del dispositivo, se pueden utilizar los parámetros <code>focus.point.lat</code> y <code>focus.point.lon</code>. Esto aumenta los resultados relevantes a nivel local.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>focus.point.lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la latitud utilizado en la búsqueda alrededor de un punto <sup>(1)</sup></td>
<td>42.268</td>
</tr>
<tr>
<td><strong><code>focus.point.lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la longitud utilizado en la búsqueda alrededor de un punto <sup>(1)</sup></td>
<td>-4.405</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Por ejemplo, si se quiere centrar la petición de autocompletado del ejemplo anterior, texto=«antoni», en la ciudad de <em>Cáceres</em>, de coordenadas de referencia latitud,longitud: 39.4744366,-6.3719358, la sintaxis a emplear es:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=antoni&amp;focus.point.lat=39.4744366&amp;focus.point.lon=-6.3719358">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=antoni&amp;focus.point.lat=39.4744366&amp;focus.point.lon=-6.3719358</a></p>
<p>que ofrece los siguientes 10 resultados:</p>
<blockquote>
<p>Palacio Enfermería de San Antonio, CÁCERES, España<br />
TR BARRIO SAN ANTONIO, CACERES, España<br />
Ermita de San Antonio, CÁCERES, España<br />
CALLE BARRIO DE SAN ANTONIO, Cáceres, España<br />
VI BARRIO SAN ANTONIO, CACERES, España<br />
Asociación de Vecinos Antonio Canales, CÁCERES, España<br />
PLAZA ANTONIO CANALES, CACERES, España<br />
Parque de Antonio Canales, CACERES, España<br />
CALLE CATEDRATICO ANTONIO SILVA, CACERES, España<br />
CALLE ANTONIO REYES HUERTAS, CACERES, España  </p>
</blockquote>
<p><br />
<img alt="Respuesta *autocompletar* Cáceres (fuente: propia)" src="../../img/autocompletar_antoni_caceres.jpg" title="Respuesta *autocompletar* Cáceres (fuente: propia)" />
<br /><br /></p>
<div class="bs-callout bs-callout-info">
<small>
  <h4><small>Nota</small></h4>
Obsérvese que como no se ha especificado en la petición ninguna capa en particular, los resultados obtenidos deberían corresponder a las tres capas posibles: <I>venue</I>, <I>address</I> y <I>street</I>, solo que en este caso por tratarse de una petición muy genérica en la que no se especifica ninguna numeración, el servidor prescinde de los resultados de la capa <I>address</I> para optimizar el tiempo de respuesta.
<br />
<br />
<I>"warnings": [
      "performance optimization: excluding 'address' layer"</I>
</small>
</div>
<p><br /></p>
<p>Si se quiere realizar la misma petición centrando los resultados en la ciudad de <em>Toledo</em> de coordenadas de referencia latitud,longitud: 39.8565733,-4.0249840, la sintaxis a emplear en este caso es:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=antoni&amp;focus.point.lat=39.8565733&amp;focus.point.lon=-4.0249840">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=antoni&amp;focus.point.lat=39.8565733&amp;focus.point.lon=-4.0249840</a></p>
<p>Arrojando los siguientes resultados:</p>
<blockquote>
<p>PLAZA SAN ANTONIO, Toledo, España<br />
CALLE ANTONIO LOPEZ, CERCA DE COBISA (LA), Toledo, España<br />
CALLE ANTONIO SAURA, La Cruz del Portillo, Toledo, España<br />
CALLE ANTONIO SAURA-LOS ALMENDROS, CRUZ DEL PORTILLO (LA), Toledo, España<br />
PLAZA POETA ANTONIO MACHADO, POLIGONO SANTA MARIA DE BENQUERENCIA, Toledo, España<br />
CALLE ANTONIO MACHADO, BARGAS, Toledo, España<br />
CALLE SAN ANTONIO, NAMBROCA, Toledo, España<br />
CALLE JOSE ANTONIO, LAYOS, Toledo, España  </p>
</blockquote>
<p><br />
<img alt="Respuesta *autocompletar* Toledo (fuente: propia)" src="../../img/autocompletar_antoni_toledo.jpg" title="Respuesta *autocompletar* Toledo (fuente: propia)" />
<br /><br /></p>
<p>El método <em>autocompletar</em> puede promover los resultados cercanos a la parte superior de la lista, al mismo tiempo que permite que las coincidencias importantes más lejanas sean visibles. Por ejemplo, buscando un caserío de nombre «Etxegorri» con un enfoque en la población de <em>Doneztebe/Santesteban (Navarra)</em>:</p>
<p>si se realiza la petición <em>autocompletar</em> sin especificar ningún enfoque:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=etxegorri">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=etxegorri</a></p>
<p>los resultados obtenidos por orden de preferencia son:</p>
<blockquote>
<p>Etxegorri Etxea, Goizueta, Navarra, España<br />
Etxegorri, Doneztebe/Santesteban, Navarra, España  </p>
</blockquote>
<p>pero sin centramos la pregunta en el entorno de la población de <em>Doneztebe/Santesteban (Navarra)</em> de coordenadas de referencia latitud,longitud: 43.130962,-1.6687443, el orden de las respuestas prioriza la más cercana al punto especificado:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=etxegorri&amp;focus.point.lat=43.130962&amp;focus.point.lon=-1.6687443">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=etxegorri&amp;focus.point.lat=43.130962&amp;focus.point.lon=-1.6687443</a></p>
<blockquote>
<p>Etxegorri, Doneztebe/Santesteban, Navarra, España<br />
Etxegorri Etxea, Goizueta, Navarra, España  </p>
</blockquote>
<div class="bs-callout bs-callout-info">
<small>
  <h4><small>Nota</small></h4>
El enfoque local se puede combinar con las distintas opciones de filtrado, con el fin de ordenar los resultados obtenidos aplicando las condiciones de filtro, en función de la distancia a un punto dado.
</small>
</div>

<p><br /></p>
<h3 id="filtros">Filtros</h3>
<p><br /></p>
<p>En la petición <em>autocompletar</em> es posible filtrar de antemano los resultados de distintas maneras:</p>
<p><br /></p>
<h4 id="filtrado-por-origen-de-los-datos">Filtrado por origen de los datos</h4>
<p><br /></p>
<p>El almacén de datos de referencia en este geocodificador permite combinar datos procedentes de distintas fuentes <sup>(2)(3)</sup>.</p>
<p>Cuando se realiza una petición <em>autocompletar</em>, esta se dirige por defecto al conjunto de todas las direcciones almacenadas en la base de datos.</p>
<p>Utilizando el parámetro <strong><code>sources</code></strong>, es posible definir sobre qué conjuntos de datos realizar la petición.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>sources</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>todas las fuentes</td>
<td>Listado de fuentes de datos separados por comas, codificados según <a href="../../listas_controladas/proveedores_de_datos">lista controlada <em>Proveedores de datos</em></a></td>
<td>cnig,calrj</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>El siguiente ejemplo realiza una consulta <em>autocompletar</em> con el texto «Mayor 5» a toda la base de datos:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=Mayor%205">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=Mayor 5</a></p>
<p>Esta petición ofrece como resultados datos procedentes de los siguientes proveedores:</p>
<table>
<thead>
<tr>
<th>Código</th>
<th>Proveedor</th>
</tr>
</thead>
<tbody>
<tr>
<td>cnig</td>
<td>Centro Nacional de Información Geográfica (CNIG)</td>
</tr>
<tr>
<td>dgcat</td>
<td>Dirección General del Catastro</td>
</tr>
<tr>
<td>ieca</td>
<td>Instituto de Estadística y Cartografía de Andalucía (IECA)</td>
</tr>
<tr>
<td>ign</td>
<td>Instituto Geográfico Nacional (IGN)</td>
</tr>
</tbody>
</table>
<p>Para realizar una petición <em>autocompletar</em> dirigida solamente a los datos del <em>Instituto de Estadística y Cartografía de Andalucía (IECA)</em>, debemos utilizar la siguiente sintaxis:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=Mayor%205&amp;sources=ieca">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=Mayor 5&amp;sources=ieca</a></p>
<p>procediendo en este caso del IECA todos los resultados obtenidos.</p>
<p><br /></p>
<h4 id="filtrado-por-tipo-de-datos">Filtrado por tipo de datos</h4>
<p><br /></p>
<p>El almacenamiento de datos permite, igual que en otros métodos, diferenciar tres tipología de datos: <em>direcciones</em>; <em>topónimos</em> y <em>puntos de interés (POIs)</em>.</p>
<p>Mediante el parámetro <strong><code>layers</code></strong> es posible dirigir la petición de información a las siguientes capas, con el fin de obtener el resultado deseado:</p>
<table class="table table-bordered">
  <thead>
    <tr>
        <th>layer (capa)</th>
        <th>descripción</th>
    </tr>
  </thead>
  <tbody>
    <tr>
        <td>venue</td>
        <td>topónimos; puntos de interés; nombres propios de las direcciones</td>
    </tr>
    <tr>
        <td>address</td>
        <td>puntos con una dirección postal</td>
    </tr>
    <tr>
        <td>street</td>
        <td>calles; vías; carreteras</td>
    </tr>
  </tbody>
  </table>

<p>El uso del parámetro <strong><code>layers</code></strong> es el siguiente:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>layers</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>todas las capas</td>
<td>Nombres de las capas de datos a las que se dirije la consulta, separados por comas</td>
<td>venue, street</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Ejemplos:</p>
<p>Búsqueda de topónimos, puntos de interés o nombres propios de direcciones que contengan la palabra <em>Masia</em>: <a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=Masia&amp;layers=venue">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=Masia&amp;layers=venue</a></p>
<p><br /></p>
<h4 id="filtrado-por-area-rectangular">Filtrado por área rectangular</h4>
<p><br /></p>
<p>El método <em>autocompletar</em> permite condicionar los posibles resultados a aquellos que se encuentran ubicados dentro de un área geográfica rectangular. Para ello es necesario conocer de antemano las coordenadas latitud y longitud, mínimas y máximas, que definen el rectángulo <sup>(4)</sup>.</p>
<p>En este caso los parámetros a utilizar son los siguientes:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>boundary.rect.max_lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor máximo de la latitud utilizado en la búsqueda en una región rectangular <sup>(1)</sup></td>
<td>41.7342</td>
</tr>
<tr>
<td><strong><code>boundary.rect.max_lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor máximo de la longitud utilizado en la búsqueda en una región rectangular <sup>(1)</sup></td>
<td>-0.6585</td>
</tr>
<tr>
<td><strong><code>boundary.rect.min_lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor mínimo de la latitud utilizado en la búsqueda en una región rectangular <sup>(1)</sup></td>
<td>41.5453</td>
</tr>
<tr>
<td><strong><code>boundary.rect.min_lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor mínimo de la longitud utilizado en la búsqueda en una región rectangular <sup>(1)</sup></td>
<td>-1.1474</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Por ejemplo, para encontrar la relación de posibles resultados de una dirección que contenga el texto "<em>mayor 5</em>" en el entorno de <em>Zaragoza</em>, dentro del área rectangular que muestra la imagen, definida por las coordenadas lat_min=41.5453; lon_min=-1.1474; at_max=41.7342; lon_max=-0.6585</p>
<p><br />
<img alt="Rectángulo área de Zaragoza(fuente: visor klokantech.com)" src="../../img/rectangulo_zaragoza.jpg" title="Rectángulo área de Zaragoza(fuente: visor klokantech.com)" />
<br />
<br /></p>
<p>La sintaxis a utilizar es:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=mayor%205&amp;boundary.rect.min_lat=41.5453&amp;boundary.rect.min_lon=-1.1474&amp;boundary.rect.max_lat=41.7342&amp;boundary.rect.max_lon=-0.6585">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=mayor 5&amp;boundary.rect.min_lat=41.5453&amp;boundary.rect.min_lon=-1.1474&amp;boundary.rect.max_lat=41.7342&amp;boundary.rect.max_lon=-0.6585</a></p>
<p>siendo estos los resultados obtenidos</sup>:</p>
<blockquote>
<p>CALLE MAYOR 5, El Burgo de Ebro, Zaragoza, España<br />
CALLE MAYOR 5, La Puebla de Alfindén, Zaragoza, España<br />
CALLE MAYOR 5, Cuarte de Huerva, Zaragoza, España<br />
CALLE MAYOR 5, La Muela, Zaragoza, España<br />
CALLE MAYOR 5, NUEZ DE EBRO, Zaragoza, España<br />
CALLE MAYORAL 5, Zaragoza, España<br />
CALLE MAYOR (MONTAÑANA) 5, Montañana, Zaragoza, España<br />
CALLE OSA MAYOR 5, ZARAGOZA, España<br />
CALLE MAYOR (JUSLIBOL) 5, Juslibol, Zaragoza, España<br />
PLAZA MAYOR (JUSLIBOL) 5, JUSLIBOL, Zaragoza, España  </p>
</blockquote>
<p>Como se puede comprobar en la siguiente imagen, todos los posibles resultados se encuentran comprendidos dentro del área especificada en la petición</p>
<p><br />
<img alt="Respuesta *autocompletar* rectángulo (fuente: propia)" src="../../img/autocompletar_rectangulo.jpg" title="Respuesta *autocompletar* rectángulo (fuente: propia)" />
<br /><br /></p>
<p><br /></p>
<h4 id="filtrado-por-area-circular">Filtrado por área circular</h4>
<p><br /></p>
<p>Entre las restricciones que se pueden aplicar en la búsqueda al vuelo que implementa el método <em>autocompletar</em>, se incluye la posibilidad de restringir los resultados propuestos entre los que se encuentrar dentro de un área circular. En este caso es necesario definir un punto de referencia y el radio en km del círculo dentro del cual se realiza la búsqueda de soluciones.</p>
<p>Los parámetros a utilizar en este caso son los siguientes:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>boundary.circle.lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la latitud del punto central del círculo utilizado en la búsqueda en una región circular <sup>(1)</sup></td>
<td>42.268</td>
</tr>
<tr>
<td><strong><code>boundary.circle.lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la longitud del punto central del círculo utilizado en la búsqueda en una región circular <sup>(1)</sup></td>
<td>-4.405</td>
</tr>
<tr>
<td><strong><code>boundary.circle.radius</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>50</td>
<td>Valor del radio (kilómetros) utilizado en la búsqueda en una región circular <sup>(1)</sup></td>
<td>10</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Por ejemplo, para encontrar una dirección que contenga el texto "<em>mayor 5</em>" en un área circular de 10 km desde Frómista (Palencia), con coordenadas de referencia (lat,lon) 42.268,-4.405.</p>
<p><br />
<img alt="Círculo 10 km desde Frómista (fuente: propia)" src="../../img/fromista_circulo_10km.jpg" title="Círculo 10 km desde Frómista (fuente: propia)" />
<br />
<br /></p>
<p>La sintaxis a utilizar es:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/autocomplete?text=mayor%205&amp;boundary.circle.lat=42.268&amp;boundary.circle.lon=-4.405&amp;boundary.circle.radius=10">https://geocoder-5-ign.larioja.org/v1/autocomplete?text=mayor 5&amp;boundary.circle.lat=42.268&amp;boundary.circle.lon=-4.405&amp;boundary.circle.radius=10</a></p>
<p>Que arroja el siguiente resultado:</p>
<blockquote>
<p>PLAZA MAYOR 5, Marcilla de Campos, Palencia, España<br />
CALLE MAYOR 5, Población de Campos, Palencia, España<br />
CALLE MAYOR 5, Boadilla del Camino, Palencia, España<br />
PLAZA MAYOR 5, BOADILLA DEL CAMINO, Palencia, España<br />
PLAZA MAYOR 5, VILLOVIECO, Palencia, España<br />
PLAZA MAYOR 5, AMAYUELAS DE ARRIBA, Palencia, España<br />
PLAZA MAYOR 5, SANTOYO, Palencia, España<br />
TRVA MAYOR 5, BOADILLA DEL CAMINO, Palencia, España<br />
TRAVESIA MAYOR 5, Boadilla del Camino, Palencia, España<br />
CALLE MAYOR 5, SANTOYO, Palencia, España  </p>
</blockquote>
<p>La consulta cartográfica de estos puntos muestra el siguiente resultado</p>
<p><br />
<img alt="Respuesta *autocompletar* círculo (fuente: propia)" src="../../img/autocompletar_circulo.jpg" title="Respuesta *autocompletar* círculo (fuente: propia)" />
<br /><br /></p>
<p><br /></p>
<hr />
<p><small></p>
<div class="text-primary">NOTAS:</div>
<div class="text-primary"><sup>(1)</sup> Utilizar la notación punto (.) como signo de separación decimal.</div>
<div class="text-primary"><sup>(2)</sup> En la fase de pruebas se han cargado datos de las siguientes <a href="../../datos/fuentes_de_datos">fuentes de datos</a>.</div>
<div class="text-primary"><sup>(3)</sup> A los datos de direcciones que se encuentran en desuso o sin vigencia administrativa, cuyo atributo ESTADO tiene el valor <I>Histórico</I>, se les añade al código de proveedor el sufijo «-h», con objeto de poder realizar peticiones específicas mediante el parámetro <I>sources</I>, y evitar al mismo tiempo interferencias en los procesos de geocodificación inversa.</div>
<div class="text-primary"><sup>(4)</sup> Puede obtener las coordenadas de un rectángulo geográfico mediante la <a href="https://boundingbox.klokantech.com/">utilidad web de Klokantech</a>.</div>
<p></small></p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Copyright: <a href='https://scne.es'>Sistema Cartográfico Nacional (España)</a></small><br>
            
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
