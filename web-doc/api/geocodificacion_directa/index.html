<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Proyecto de geocodificación de direcciones. Comisión Especializada de Normas Geográficas. España">
    <meta name="author" content="Gonzalo López García">
    <link rel="canonical" href="https://example.com/api/geocodificacion_directa/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Geocodificación directa - Geocodificador SCN</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">Geocodificador SCN</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Datos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../datos/modelo_de_datos/">Modelo de datos</a>
</li>

                        
                            
<li >
    <a href="../../datos/fuentes_de_datos/">Fuentes de datos</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../informacion_general/">Información general</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Métodos</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">Geocodificación directa</a>
</li>

        
            
<li >
    <a href="../geocodificacion_inversa/">Geocodificación inversa</a>
</li>

        
            
<li >
    <a href="../autocompletar/">Autocompletar</a>
</li>

        
            
<li >
    <a href="../geocodificacion_estructurada/">Geocodificación estructurada</a>
</li>

        
            
<li >
    <a href="../no_disponible/">Lugar</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../no_disponible/">Formato de la respuesta</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Referencias <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../referencias/abreviaturas/">Abreviaturas</a>
</li>

                        
                            
<li >
    <a href="../../referencias/ciudades_autonomas/">Ciudades autónomas</a>
</li>

                        
                            
<li >
    <a href="../../referencias/comunidades_autonomas/">Comunidades autónomas</a>
</li>

                        
                            
<li >
    <a href="../../referencias/estados_del_dato/">Estados del dato</a>
</li>

                        
                            
<li >
    <a href="../../referencias/lenguas/">Lenguas</a>
</li>

                        
                            
<li >
    <a href="../../referencias/municipios/">Municipios</a>
</li>

                        
                            
<li >
    <a href="../../referencias/poblaciones/">Poblaciones</a>
</li>

                        
                            
<li >
    <a href="../../referencias/proveedores_de_datos/">Proveedores de datos</a>
</li>

                        
                            
<li >
    <a href="../../referencias/provincias/">Provincias</a>
</li>

                        
                            
<li >
    <a href="../../referencias/tipos_de_dato/">Tipos de dato</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../ejemplos/no_disponible/">Ejemplos</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../informacion_general/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../geocodificacion_inversa/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/cenormasgeograficas/geocodificador/edit/master/docs/api/geocodificacion_directa.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#geocodificacion-directa">GEOCODIFICACIÓN DIRECTA</a></li>
            <li class="second-level"><a href="#construccion-de-la-consulta">Construcción de la consulta</a></li>
                
            <li class="second-level"><a href="#configurar-el-numero-de-resultados">Configurar el número de resultados</a></li>
                
            <li class="second-level"><a href="#consulta-en-un-area-determinada">Consulta en un área determinada</a></li>
                
                <li class="third-level"><a href="#busqueda-en-un-area-rectangular">Búsqueda en un área rectangular</a></li>
                <li class="third-level"><a href="#busqueda-en-un-area-circular">Búsqueda en un área circular</a></li>
                <li class="third-level"><a href="#busqueda-aplicando-jerarquia-administrativa">Búsqueda aplicando jerarquía administrativa</a></li>
            <li class="second-level"><a href="#priorizacion-de-resultados-por-proximidad">Priorización de resultados por proximidad</a></li>
                
                <li class="third-level"><a href="#priorizar-la-proximidad-a-un-punto">Priorizar la proximidad a un punto</a></li>
            <li class="second-level"><a href="#busqueda-combinada-priorizada-dentro-de-un-area">Búsqueda combinada priorizada dentro de un área</a></li>
                
            <li class="second-level"><a href="#filtrado-de-la-busqueda">Filtrado de la búsqueda</a></li>
                
                <li class="third-level"><a href="#filtrado-por-origen-de-los-datos">Filtrado por origen de los datos</a></li>
                <li class="third-level"><a href="#filtrado-por-tipo-de-datos">Filtrado por tipo de datos</a></li>
            <li class="second-level"><a href="#cuadro-de-parametros">Cuadro de parámetros</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="geocodificacion-directa">GEOCODIFICACIÓN DIRECTA</h2>
<p><em>(EN EDICIÓN)</em>
<br /></p>
<p>El método de <em>geocodificación directa</em>, es el proceso que es necesario utilizar para la búsqueda y extracción de datos de una dirección o lugar, junto con las coordenadas geográficas de su ubicación, a partir de sus datos identificativos o de referencia.</p>
<p>La url (endpoint) a la que dirigir la petición es: <strong>https://geocoder-5-ign.larioja.org/v1/search</strong></p>
<p><br /></p>
<h3 id="construccion-de-la-consulta">Construcción de la consulta</h3>
<p><br /></p>
<p>El formato de interrogación a la API se construye a partir de la url de referencia de este método (/v1/search), seguido del signo <strong><code>?</code></strong> y de la secuencia de parámetros que configuran la pregunta, separados por el signo <strong><code>&amp;</code></strong>.</p>
<p>Si se desea localizar una dirección que contenga un texto determinado, que es el caso más común, el parámetro a utilizar es <strong><code>text</code></strong>:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>text</code></strong></td>
<td>cadena de caracteres</td>
<td>sí</td>
<td>ninguno</td>
<td>Texto de la dirección a buscar</td>
<td>Calle Mayor 10</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>En el ejemplo siguiente el texto a buscar en la dirección es «<em>murrieta</em>», para lo cual se añade a la url del método de búsqueda <code>https://geocoder-5-ign.larioja.org/v1/search</code>, el signo <code>?</code> y el parámetro <code>text=murrieta</code>.</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/search?text=murrieta">https://geocoder-5-ign.larioja.org/v1/search?text=murrieta</a></p>
<p>Pulsando sobre el enlace anterior se obtiene un fichero en formato <a href="https://geojson.org/">GeoJSON</a> que contiene los resultados de la búsqueda que mejor coinciden con el texto «<em>murrieta</em>». El fichero con formato GeoJSON puede ser leído en un navegador web <sup>(1)</sup> o en un procesador de texto.</p>
<p>En este caso, los resultados obtenidos son los siguientes <sup>(2)</sup>:</p>
<blockquote>
<p>BARRIO MURRIETA, Putxeta, Bizkaia, España (-3.091738,43.319819)<br />
CALLE MURRIETA, San Vicente de Barakaldo/San Bizenti-Barakaldo, Bizkaia, España (-2.989928,43.301062)<br />
Calle Marqués de Murrieta, Logroño, La Rioja, España (-2.452761,42.465614)  </p>
</blockquote>
<p><br /></p>
<h3 id="configurar-el-numero-de-resultados">Configurar el número de resultados</h3>
<p><br /></p>
<p>Por defecto la API devuelve hasta 10 resultados. Si se desea un número distinto de resultados, este se puede configurar en la llamada utilizando el parámetro <strong><code>size</code></strong>.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>size</code></strong></td>
<td>integer</td>
<td>no</td>
<td>10</td>
<td>Número deseado de resultados</td>
<td>5</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Si en el ejemplo anterior se deseara recibir solamente un único resultado, la sintaxis de la consulta debería ser:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/search?text=murrieta&amp;size=1">https://geocoder-5-ign.larioja.org/v1/search?text=murrieta&amp;size=1</a></p>
<p>siendo el resultado obtenido:</p>
<blockquote>
<p>BARRIO MURRIETA, Putxeta, Bizkaia, España (-3.091738,43.319819)  </p>
</blockquote>
<p><br /></p>
<h3 id="consulta-en-un-area-determinada">Consulta en un área determinada</h3>
<p><br /></p>
<p>Es posible constreñir la búsqueda de direcciones a una región o país en particular, o limitarla a un área específica. La <a href="https://github.com/pelias/pelias"><em>API Pelias</em></a> que utiliza el geocodificador del SCN permite tres fórmulas para limitar espacialmente la búsqueda: <em>país</em>, <em>rectángulo</em> y <em>círculo</em>.</p>
<p><br /></p>
<h4 id="busqueda-en-un-area-rectangular">Búsqueda en un área rectangular</h4>
<p><br /></p>
<p>Para limitar la búsqueda a un área geográfica rectangular, es necesario conocer las coordenadas latitud y longitud, mínimas y máximas, que definen el rectángulo <sup>(3)</sup>.</p>
<p>En este caso los parámetros a utilizar son los siguientes:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>boundary.rect.max_lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor máximo de la latitud utilizado en la búsqueda en una región rectangular <sup>(4)</sup></td>
<td>41.7342</td>
</tr>
<tr>
<td><strong><code>boundary.rect.max_lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor máximo de la longitud utilizado en la búsqueda en una región rectangular <sup>(4)</sup></td>
<td>-0.6585</td>
</tr>
<tr>
<td><strong><code>boundary.rect.min_lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor mínimo de la latitud utilizado en la búsqueda en una región rectangular <sup>(4)</sup></td>
<td>41.5453</td>
</tr>
<tr>
<td><strong><code>boundary.rect.min_lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor mínimo de la longitud utilizado en la búsqueda en una región rectangular <sup>(4)</sup></td>
<td>-1.1474</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Por ejemplo, para encontrar una dirección que contenga el texto "<em>mayor</em>" en el área rectangular que muestra la imagen, definida por las coordenadas lat_min=41.5453; lon_min=-1.1474; at_max=41.7342; lon_max=-0.6585</p>
<p><br />
<img alt="Rectángulo área de Zaragoza(fuente: visor klokantech.com)" src="../../img/rectangulo_zaragoza.jpg" title="Rectángulo área de Zaragoza(fuente: visor klokantech.com)" />
<br />
<br /></p>
<p>La sintaxis a utilizar es:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/search?text=mayor&amp;boundary.rect.min_lat=41.5453&amp;boundary.rect.min_lon=-1.1474&amp;boundary.rect.max_lat=41.7342&amp;boundary.rect.max_lon=-0.6585">https://geocoder-5-ign.larioja.org/v1/search?text=mayor&amp;boundary.rect.min_lat=41.5453&amp;boundary.rect.min_lon=-1.1474&amp;boundary.rect.max_lat=41.7342&amp;boundary.rect.max_lon=-0.6585</a></p>
<p>siendo estos los resultados obtenidos <sup>(2)</sup>:</p>
<blockquote>
<p>CALLE MAYOR, La Muela, Zaragoza, España (1.117274,41.57985)<br />
CALLE MAYOR (MONTAÑANA), MONTAÑANA, Zaragoza, España (-0.822357,41.684245)<br />
CALLE OSA MAYOR, Zaragoza, España (0.932542,41.639184)<br />
PLAZA MAYOR (CARTUJA), Cartuja Baja, Zaragoza, España (-0.821923,41.604933)  </p>
</blockquote>
<p><br /></p>
<h4 id="busqueda-en-un-area-circular">Búsqueda en un área circular</h4>
<p><br /></p>
<p>En aquellos casos en los que se desea localizar las direcciones que se encuentran dentro de una distancia a un punto dado, se puede utilizar las búsqueda en un área circular, partiendo de una coordenada central de referencia y el radio en km del círculo dentro del cual se quiere realizar la búsqueda.</p>
<p>Los parámetros a utilizar en este caso son los siguientes:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>boundary.circle.lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la latitud del punto central del círculo utilizado en la búsqueda en una región circular <sup>(4)</sup></td>
<td>42.268</td>
</tr>
<tr>
<td><strong><code>boundary.circle.lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la longitud del punto central del círculo utilizado en la búsqueda en una región circular <sup>(4)</sup></td>
<td>-4.405</td>
</tr>
<tr>
<td><strong><code>boundary.circle.radius</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>50</td>
<td>Valor del radio (kilómetros) utilizado en la búsqueda en una región circular <sup>(4)</sup></td>
<td>10</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Por ejemplo, para encontrar una dirección que contenga el texto "<em>mayor</em>" en un área circular de 10 km desde Frómista (Palencia), con coordenadas de referencia (lat,lon) 42.268,-4.405.</p>
<p><br />
<img alt="Círculo 10 km desde Frómista (fuente: propia)" src="../../img/fromista_circulo_10km.jpg" title="Círculo 10 km desde Frómista (fuente: propia)" />
<br />
<br /></p>
<p>La sintaxis a utilizar es:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/search?text=mayor&amp;boundary.circle.lat=42.268&amp;boundary.circle.lon=-4.405&amp;boundary.circle.radius=10">https://geocoder-5-ign.larioja.org/v1/search?text=mayor&amp;boundary.circle.lat=42.268&amp;boundary.circle.lon=-4.405&amp;boundary.circle.radius=10</a></p>
<p>Que arroja el siguiente resultado:</p>
<blockquote>
<p>CALLE MAYOR, Marcilla de Campos, Palencia, España (4.397729,42.317378)<br />
PLAZA MAYOR, Santoyo, Palencia, España (-4.34285,42.214136)<br />
TRAVESIA MAYOR, Boadilla del Camino, Palencia, España (-4.347739,42.259541)<br />
TRVA MAYOR, BOADILLA DEL CAMINO, Palencia, España (-4.34823,42.259339)  </p>
</blockquote>
<p><br /></p>
<h4 id="busqueda-aplicando-jerarquia-administrativa">Búsqueda aplicando jerarquía administrativa</h4>
<p><br /></p>
<p>El almacenamiento de información mantiene internamente una estructuración jerárquica entre lugares, aplicando un concepto denominado <em>jerarquía administrativa</em>, en el que cada registro se asocia a un vecindario, ciudad, región, país y otras regiones principales.</p>
<p>Esta propiedad tiene múltiples aplicaciones entre las que destaca el filtrado de información. El ID global de Pelias (gid) de cualquier registro se puede usar con el filtro <code>boundary.gid</code> para devolver solo registros con un ascendente determinado.</p>
<p>Si se definen varios tipos de regiones en la misma solicitud, los resultados corresponderán a la intersección de todos los límites. Por lo que si las regiones no se superponen, el resultado de la consulta no contendrá datos.</p>
<p class="text-warning">Por el momento no se ha implementado el gid en las tablas de regiones, por lo que parámetro boundary.gid no genera resultados específicos.</p>

<p><br /></p>
<h3 id="priorizacion-de-resultados-por-proximidad">Priorización de resultados por proximidad</h3>
<p><br /></p>
<p>En algunas ocasiones es conveniente presentar los resultados más cercanos a una ubicación o región en la parte superior de la lista sin renunciar a otros resultados que se encuentran geográficamente más lejanos.</p>
<p>La <em>geolocalización directa</em> permite priorizar los resultados dentro de los límites geográficos, incluso alrededor de un punto, dentro de un país o dentro de una región.</p>
<p><br /></p>
<h4 id="priorizar-la-proximidad-a-un-punto">Priorizar la proximidad a un punto</h4>
<p><br /></p>
<p>Aplicando a la búsqueda el parámetro <strong><code>focus.point</code></strong>, los resultados se ordenarán en parte por su proximidad a la coordenada dada.</p>
<p>Para las mismas condiciones, los resultados más cercanos al punto aparecerán en la parte superior de la relación. Sin embargo, a diferencia de las consultas circunscritas a áreas rectangulares o circulares, este parámetro puede devolver resultados muy distantes de la coordenada de referencia.</p>
<p>Los parámetros a utilizar para la consulta por proximidad a un punto son:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>focus.point.lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la latitud utilizado en la búsqueda alrededor de un punto <sup>(4)</sup></td>
<td>42.268</td>
</tr>
<tr>
<td><strong><code>focus.point.lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la longitud utilizado en la búsqueda alrededor de un punto <sup>(4)</sup></td>
<td>-4.405</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Si repetimos la consulta de ejemplo utilizada en la busqueda por círculo, pero en este caso utilizando las coordenadas de Frómista para consultar por proximidad a un punto:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/search?text=mayor&amp;focus.point.lat=42.268&amp;focus.point.lon=-4.405">https://geocoder-5-ign.larioja.org/v1/search?text=mayor&amp;focus.point.lat=42.268&amp;focus.point.lon=-4.405</a></p>
<p>Se obtiene el siguiente resultado:</p>
<blockquote>
<p>CALLE MAYOR, Población de Campos, Palencia, España"(-4.448308,42.270092) [distancia: 3.575]<br />
TRVA MAYOR, BOADILLA DEL CAMINO, Palencia, España (-4.34823,42.259339) [distancia: 4.775]<br />
TRAVESIA MAYOR, Boadilla del Camino, Palencia, España (-4.347739,42.259541) [distancia: 4.810]<br />
PLAZA MAYOR, BOADILLA DEL CAMINO, Palencia, España (4.347215,42.259306) [distancia: 4.858]  </p>
</blockquote>
<p><br /></p>
<h3 id="busqueda-combinada-priorizada-dentro-de-un-area">Búsqueda combinada priorizada dentro de un área</h3>
<p><br /></p>
<p>Es posible combinar en la misma consulta la búsqueda en un área determinada, ordenando al mismo tiempo los resultados por su proximidad a un punto dado.</p>
<p>En el siguiente ejemplo se prioriza la búsqueda en un área rectangular en las proximidades de Zaragoza, priorizando la proximidad a su esquina de coordenadas latitud,longitud mínimas:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/search?text=mayor&amp;boundary.rect.min_lat=41.5453&amp;boundary.rect.min_lon=-1.1474&amp;boundary.rect.max_lat=41.7342&amp;boundary.rect.max_lon=-0.6585&amp;focus.point.lat=41.5453&amp;focus.point.lon=-1.1474">https://geocoder-5-ign.larioja.org/v1/search?text=mayor&amp;boundary.rect.min_lat=41.5453&amp;boundary.rect.min_lon=-1.1474&amp;boundary.rect.max_lat=41.7342&amp;boundary.rect.max_lon=-0.6585&amp;focus.point.lat=41.5453&amp;focus.point.lon=-1.1474</a></p>
<p>El resultado obtenido por orden de priorización es:</p>
<blockquote>
<p>CALLE MAYOR, La Muela, Zaragoza, España (1.122955,41.577862) [distancia: 4.158]<br />
CALLE MAYOR (GARRAPINILLOS), Garrapinillos, Zaragoza, España (1.028693,41.682992) [distancia: 18.236]<br />
CALLE OSA MAYOR, ZARAGOZA, España (-0.932936,41.637167) [distancia": 20.577]  </p>
</blockquote>
<p><br /></p>
<h3 id="filtrado-de-la-busqueda">Filtrado de la búsqueda</h3>
<p><br /></p>
<p><br /></p>
<h4 id="filtrado-por-origen-de-los-datos">Filtrado por origen de los datos</h4>
<p><br /></p>
<p>El almacén de datos de referencia en este geocodificador permite combinar datos procedentes de distintas fuentes, de hecho, uno de los objetivos principales del proyecto es definir un modelo de datos neutro en formato CSV, con objeto de poder cargar datos provenientes de distintos productores.</p>
<p>La <a href="https://github.com/pelias/pelias"><em>API Pelias</em></a> ofrece la posibilidad de seleccionar, entre todos, el conjunto de datos de referencia al cual dirigir la búsqueda.</p>
<p>En la fase de pruebas se han cargado direcciones de las siguientes <a href="../../datos/fuentes_de_datos">fuentes de datos</a> <sup>(5)</sup>.</p>
<p>Cuando se realiza una consulta, se dirige por defecto al conjunto de todas las direcciones que están almacenadas en la base de datos.</p>
<p>Utilizando el parámetro <strong><code>sources</code></strong>, es posible definir sobre qué conjuntos de datos realizar la petición.</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>sources</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>todas las fuentes</td>
<td>Listado de fuentes de datos separados por comas, codificados según <a href="../../listas_controladas/proveedores_de_datos">lista controlada <em>Proveedores de datos</em></a></td>
<td>cnig,calrj</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>El siguiente ejemplo realiza una consulta general a toda la base de datos:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/search?text=mayor 10 Briones">https://geocoder-5-ign.larioja.org/v1/search?text=mayor 10 Briones</a></p>
<p>En tanto que el siguiente ejemplo dirige la consulta solamente a los datos aportados por el <em>Gobierno de La Rioja</em>:</p>
<p><a href="https://geocoder-5-ign.larioja.org/v1/search?text=mayor 10 Briones&amp;sources=calrj">https://geocoder-5-ign.larioja.org/v1/search?text=mayor 10 Briones&amp;sources=calrj</a></p>
<p><br /></p>
<h4 id="filtrado-por-tipo-de-datos">Filtrado por tipo de datos</h4>
<p><br /></p>
<p>El almacenamiento de datos se realiza en tablas diferentes en función de su naturaleza, lo que permite diferenciar tres tipología de datos: <em>direcciones</em>; <em>topónimos</em> y <em>puntos de interés (POIs)</em>.</p>
<p>El parámetro <strong><code>layers</code></strong> permite dirigir la petición de información a las siguientes capas, con el fin de obtener el resultado deseado:</p>
<table class="table table-bordered">
  <thead>
    <tr>
        <th>layer (capa)</th>
        <th>descripción</th>
    </tr>
  </thead>
  <tbody>
    <tr>
        <td>venue</td>
        <td>topónimos; puntos de interés; nombres propios de las direcciones</td>
    </tr>
    <tr>
        <td>address</td>
        <td>puntos con una dirección postal</td>
    </tr>
    <tr>
        <td>street</td>
        <td>calles; vías; carreteras</td>
    </tr>
  </tbody>
  </table>

<p>El uso del parámetro <strong><code>layers</code></strong> es el siguiente:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>layers</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>todas las capas</td>
<td>Nombres de las capas de datos a las que se dirije la consulta, separados por comas</td>
<td>venue, street</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Ejemplos:</p>
<p>Búsqueda del topónimo <em>Mirador del Moro</em>: <a href="https://geocoder-5-ign.larioja.org/v1/search?text=Mirador del Moro&amp;layers=venue">https://geocoder-5-ign.larioja.org/v1/search?text=Mirador del Moro&amp;layers=venue</a></p>
<p><br />
<img alt="Mirador del Moro(fuente: imagen propia)" src="../../img/mirador_del_moro.jpg" title="Mirador del Moro(fuente: imagen propia)" />
<br /></p>
<p><br />
Búsqueda del punto de interés <em>Cortijo Majón</em>: 
 <a href="https://geocoder-5-ign.larioja.org/v1/search?text=Cortijo Majón&amp;layers=venue">https://geocoder-5-ign.larioja.org/v1/search?text=Cortijo Majón&amp;layers=venue</a></p>
<p><br />
<img alt="Cortijo Majón(fuente: imagen propia)" src="../../img/cortijo_majon.jpg" title="Cortijo Majón(fuente: imagen propia)" />
<br /></p>
<p><br /></p>
<h3 id="cuadro-de-parametros">Cuadro de parámetros</h3>
<p><br /></p>
<p>Esta es la relación de parámetros que se pueden utilizar en las operaciones de <em>geocodificación directa</em>:</p>
<table>
<thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Obligatorio</th>
<th>Defecto</th>
<th>Descripción</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>boundary.circle.lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la latitud del punto central del círculo utilizado en la búsqueda en una región circular <sup>(4)</sup></td>
<td>42.268</td>
</tr>
<tr>
<td><strong><code>boundary.circle.lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la longitud del punto central del círculo utilizado en la búsqueda en una región circular <sup>(4)</sup></td>
<td>-4.405</td>
</tr>
<tr>
<td><strong><code>boundary.circle.radius</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>50</td>
<td>Valor del radio (kilómetros) utilizado en la búsqueda en una región circular <sup>(4)</sup></td>
<td>10</td>
</tr>
<tr>
<td><strong><code>boundary.country</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>ninguno</td>
<td><p class="text-warning">NO IMPLEMENTADO</p></td>
<td></td>
</tr>
<tr>
<td><strong><code>boundary.gid</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>ninguno</td>
<td><p class="text-warning">NO IMPLEMENTADO</p></td>
<td></td>
</tr>
<tr>
<td><strong><code>boundary.rect.max_lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor máximo de la latitud utilizado en la búsqueda en una región rectangular <sup>(4)</sup></td>
<td>41.7342</td>
</tr>
<tr>
<td><strong><code>boundary.rect.max_lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor máximo de la longitud utilizado en la búsqueda en una región rectangular <sup>(4)</sup></td>
<td>-0.6585</td>
</tr>
<tr>
<td><strong><code>boundary.rect.min_lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor mínimo de la latitud utilizado en la búsqueda en una región rectangular <sup>(4)</sup></td>
<td>41.5453</td>
</tr>
<tr>
<td><strong><code>boundary.rect.min_lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor mínimo de la longitud utilizado en la búsqueda en una región rectangular <sup>(4)</sup></td>
<td>-1.1474</td>
</tr>
<tr>
<td><strong><code>focus.point.lat</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la latitud utilizado en la búsqueda alrededor de un punto <sup>(4)</sup></td>
<td>42.268</td>
</tr>
<tr>
<td><strong><code>focus.point.lon</code></strong></td>
<td>numérico coma flotante</td>
<td>no</td>
<td>ninguno</td>
<td>Valor de la longitud utilizado en la búsqueda alrededor de un punto <sup>(4)</sup></td>
<td>-4.405</td>
</tr>
<tr>
<td><strong><code>layers</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>todas las capas</td>
<td>Nombres de las capas de datos a las que se dirije la consulta, separados por comas</td>
<td>venue, street</td>
</tr>
<tr>
<td><strong><code>size</code></strong></td>
<td>integer</td>
<td>no</td>
<td>10</td>
<td>Número deseado de resultados</td>
<td>5</td>
</tr>
<tr>
<td><strong><code>sources</code></strong></td>
<td>cadena de caracteres</td>
<td>no</td>
<td>todas las fuentes</td>
<td>Listado de fuentes de datos separados por comas, codificados según <a href="../../listas_controladas/proveedores_de_datos">lista controlada <em>Proveedores de datos</em></a></td>
<td>cnig,calrj</td>
</tr>
<tr>
<td><strong><code>text</code></strong></td>
<td>cadena de caracteres</td>
<td>sí</td>
<td>ninguno</td>
<td>Texto de la dirección a buscar</td>
<td>Calle Mayor 10</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><br /></p>
<hr />
<p><small></p>
<div class="text-primary">NOTAS:</div>

<div class="text-primary"><sup>(1)</sup> Se aconseja implementar en el navegador web un complemento para la visualización estructurada de ficheros JSON.</div>
<div class="text-primary"><sup>(2)</sup> Aunque las coordenadas geográficas generalmente se suelen expresar en el orden latitud,longitud, los resultados de la API se ofrecen en el orden longitud,latitud.</div>
<div class="text-primary"><sup>(3)</sup> Puede obtener las coordenadas de un rectángulo geográfico mediante la <a href="https://boundingbox.klokantech.com/">utilidad web de Klokantech</a>.</div>
<div class="text-primary"><sup>(4)</sup> Utilizar la notación punto (.) como signo de separación decimal.</div>
<div class="text-primary"><sup>(5)</sup> A los datos de direcciones que se encuentran en desuso o sin vigencia administrativa, cuyo atributo ESTADO tiene el valor <I>Histórico</I>, se les añade al código de proveedor el sufijo «-h», con objeto de poder realizar *geocodificación directa* específica mediante el parámetro <I>sources</I>, y evitar al mismo tiempo interferencias en los procesos de geocodificación inversa.</div>
<p></small></p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Copyright: <a href='https://scne.es'>Sistema Cartográfico Nacional (España)</a></small><br>
            
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
